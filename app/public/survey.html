<html lang="en"><head>
    <meta charset="UTF-8">
    <title>FriendFinder</title>
  
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  
    <!-- Font Awesome Glyphicons -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
  
    <!-- Chosen -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
  
    <style>
        body {font-family: Arial, Helvetica, sans-serif;}
        
        /* The Modal (background) */
        .modal {
          display: none; /* Hidden by default */
          position: fixed; /* Stay in place */
          z-index: 1; /* Sit on top */
          padding-top: 100px; /* Location of the box */
          left: 0;
          top: 0;
          width: 100%; /* Full width */
          height: 100%; /* Full height */
          overflow: auto; /* Enable scroll if needed */
          background-color: rgb(0,0,0); /* Fallback color */
          background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }
        
        /* Modal Content */
        .modal-content {
          background-color: #fefefe;
          margin: auto;
          padding: 20px;
          border: 1px solid #888;
          width: 80%;
        }
        
        .modal-backdrop {
          opacity:0 !important;
          z-index: 0; /* Sit on top */
        }
        </style>

  </head>
  
  <body>
  
    <div class="container">
  
      <h2>Survey Questions</h2>
      <hr>
  
      <h3><strong>About You</strong></h3>
      <h4>Name (Required)</h4>
      <input type="text" id="friendsName" class="form-control" required="">
  
      <h4>Link to Photo Image (Required)</h4>
      <input type="text" id="friendsPhoto" class="form-control" required="">
  
      <hr>
  
      <h3><strong>Question 1</strong></h3>
      <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
      <select class="form-control" id="q1">
        <option value="" disabled selected>Select a number</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>

      
      <h3><strong>Question 2</strong></h3>
      <h4>Generally speaking, you rely more on your experience than your imagination.</h4>
      <select class="form-control" id="q2">
        <option value="" disabled selected>Select a number</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>  
  
      <h3><strong>Question 3</strong></h3>
      <h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>
      <select class="form-control" id="q3">
        <option value="" disabled selected>Select a number</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>  
  
      <h3><strong>Question 4</strong></h3>
      <h4>You rarely do something just out of sheer curiosity.</h4>
      <select class="form-control" id="q4">
        <option value="" disabled selected>Select a number</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>  
  
      <h3><strong>Question 5</strong></h3>
      <h4>People can rarely upset you.</h4>
      <select class="form-control" id="q5">
        <option value="" disabled selected>Select a number</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>  
  
      <h3><strong>Question 6</strong></h3>
      <h4>It is often difficult for you to relate to other people’s feelings.</h4>
      <select class="form-control" id="q6">
        <option value="" disabled selected>Select a number</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>  
  
      <h3><strong>Question 7</strong></h3>
      <h4>In a discussion, truth should be more important than people’s sensitivities.</h4>
      <select class="form-control" id="q7">
        <option value="" disabled selected>Select a number</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>  

      <h3><strong>Question 8</strong></h3>
      <h4>You rarely get carried away by fantasies and ideas.</h4>
      <select class="form-control" id="q8">
        <option value="" disabled selected>Select a number</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>

      <h3><strong>Question 9</strong></h3>
      <h4>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h4>
      <select class="form-control" id="q9">
        <option value="" disabled selected>Select a number</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>

      <h3><strong>Question 10</strong></h3>
      <h4>You feel more energetic after spending time with a group of people.</h4>
      <select class="form-control" id="q10">
        <option value="" disabled selected>Select a number</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>  

      <br>
      <br>
  
      <!-- Submit Button -->
      <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="false"></i>
       Submit</button>
  
      <hr>
      <footer class="footer">
        <div class="container">
          <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/justbouton/HW-FriendFinder">GitHub Repo</a></p>
        </div>
      </footer>
  
    </div>
  
    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
          <h4>Closest Friend Match</h4>
          <div class="divider"></div>
          <h5 id="userMatch"></h5>
          <img id="userMatchImage" width="650" src="">
        </div>
        <!-- <div class="modal-footer"> -->
        </div>
      </div>
  

<script type="text/javascript">

// Form validatition on.click, store friendsInput into array, for loop to compare current user against every user in friends.js, push to compareFriends array, find the lowest number, return modal of most compatible friend, pass array into friends.js.
$('#submit').on('click', function(event) {
event.preventDefault();

  // Declare arr to hold friendsInput as key pair values
  var friendsInput = {
    name: $('#friendsName').val().trim(),
    photo: $('#friendsPhoto').val().trim(),
    score: [
      $('#q1').val().trim(),
      $('#q2').val().trim(),
      $('#q3').val().trim(),
      $('#q4').val().trim(),
      $('#q5').val().trim(),
      $('#q6').val().trim(),
      $('#q7').val().trim(),
      $('#q8').val().trim(),
      $('#q9').val().trim(),
      $('#q10').val().trim()
    ]
  }
  console.log(friendsInput)

  // post to /api/friends
  $.post('api/friends', friendsInput)
  .done(function(data) {
            
    console.log('response = ' + JSON.stringify(data));

      // Set the name and image values of friend match
      $('#userMatch').html(data.matchName);
      $("#userMatchImage").attr("src", data.matchImage);

    // Pop open the modal dialog           
      $('.modal').modal({
        dismissible: true, // Modal can be dismissed by clicking outside of the modal
        inDuration: 300, // Transition in duration
        outDuration: 200, // Transition out duration
        startingTop: '4%', // Starting top style attribute
        endingTop: '10%' // Ending top style attribute
      }); // When modal closed refresh page
      // $(".modal").on("hidden.bs.modal", function () {
      //   window.location = "/survey";
      // });
    });
});

</script>


<!-- //       // Capture the form inputs
//       $("#submit").on("click", function(event) {
//         event.preventDefault();
  
//         // Form validation
//         function validateForm() {
//           var isValid = true;
//           $(".form-control").each(function() {
//             if ($(this).val() === "") {
//               isValid = false;
//             }
//           });
  
//           $(".chosen-select").each(function() {
  
//             if ($(this).val() === "") {
//               isValid = false;
//             }
//           });
//           return isValid;
//         } -->
  </body></html>